import{_ as a,o as s,c as n,b as e}from"./app-B6NiJo-f.js";const i={},l=e(`<p>git rebase 的操作就如同灭霸的响指一般，能够改变仓库的历史，常用来合并提交信息，让工作树尽可能可以变得整洁。</p><h2 id="更改历史提交时间" tabindex="-1"><a class="header-anchor" href="#更改历史提交时间"><span>更改历史提交时间</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">git</span> rebase --committer-date-is-author-date</span>
<span class="line"><span class="token comment"># 或者利用 filter-branch</span></span>
<span class="line"><span class="token function">git</span> filter-branch --env-filter <span class="token string">&#39;GIT_COMMITTER_DATE=$GIT_AUTHOR_DATE; export GIT_COMMITTER_DATE&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="更改历史提交作者" tabindex="-1"><a class="header-anchor" href="#更改历史提交作者"><span>更改历史提交作者</span></a></h2><h3 id="修改提交作者-交互式" tabindex="-1"><a class="header-anchor" href="#修改提交作者-交互式"><span>修改提交作者(交互式)</span></a></h3><p>思路: 变基到要修改的commit的前一个commit,修改后提交,继续变基.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">git</span> rebase <span class="token parameter variable">-i</span> commitID</span>
<span class="line"><span class="token function">git</span> commit <span class="token parameter variable">--amend</span> <span class="token parameter variable">--author</span><span class="token operator">=</span><span class="token string">&quot;Author Name &lt;email@address.com&gt;&quot;</span></span>
<span class="line"><span class="token function">git</span> rebase <span class="token parameter variable">--continue</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="脚本批量修改" tabindex="-1"><a class="header-anchor" href="#脚本批量修改"><span>脚本批量修改</span></a></h3><p>查找条件为OLD_EMAIL,替换相应的提交作者,邮箱,可以更改相应参数的查询条件</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">git</span> filter-branch <span class="token parameter variable">-f</span> --env-filter <span class="token string">&#39;</span>
<span class="line">OLD_EMAIL=&quot;emample@email.com&quot;</span>
<span class="line">CORRECT_NAME=&quot;Your New Name&quot;</span>
<span class="line">CORRECT_EMAIL=&quot;emample@email.com&quot;</span>
<span class="line">if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]</span>
<span class="line">then</span>
<span class="line">    export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;</span>
<span class="line">    export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;</span>
<span class="line">fi</span>
<span class="line">if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]</span>
<span class="line">then</span>
<span class="line">    export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;</span>
<span class="line">    export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;</span>
<span class="line">fi</span>
<span class="line">&#39;</span> --tag-name-filter <span class="token function">cat</span> -- <span class="token parameter variable">--branches</span> <span class="token parameter variable">--tags</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),t=[l];function c(r,p){return s(),n("div",null,t)}const d=a(i,[["render",c],["__file","20210429rebase.html.vue"]]),m=JSON.parse('{"path":"/blogs/note/20210429rebase.html","title":"妙用Git rebase和filter-branch","lang":"en-US","frontmatter":{"title":"妙用Git rebase和filter-branch","author":"Rain","tags":["Git"],"categories":["note"],"date":"2021-4-29 15:52:06"},"headers":[{"level":2,"title":"更改历史提交时间","slug":"更改历史提交时间","link":"#更改历史提交时间","children":[]},{"level":2,"title":"更改历史提交作者","slug":"更改历史提交作者","link":"#更改历史提交作者","children":[{"level":3,"title":"修改提交作者(交互式)","slug":"修改提交作者-交互式","link":"#修改提交作者-交互式","children":[]},{"level":3,"title":"脚本批量修改","slug":"脚本批量修改","link":"#脚本批量修改","children":[]}]}],"git":{"createdTime":1717432393000,"updatedTime":1717432393000,"contributors":[{"name":"Rain","email":"smalltime153@gmail.com","commits":1}]},"filePathRelative":"blogs/note/20210429rebase.md"}');export{d as comp,m as data};
